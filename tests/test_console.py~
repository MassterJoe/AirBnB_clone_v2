#!/usr/bin/python3
"""unittest for console"""
import unittest
import MySQLdb


class test_console(unittest.TestCase):
    def setUp(self):
        """connect to the database """
        self.conn = MySQLdb.connect(user='root', passwd='testpass', db='testdb')

        #create a test table
        self.cursor.execute('CREATE TABLE test_table (id INT, name VARCHAR(255))')

    def test_add_state(self):
        """Assert the current state of the table """
        self.cursor.execute('SELECT COUNT(*) FROM test_table')
        before_count = self.cursor.fetchone()[0]

        #add new record
        self.cursor.execute("INSERT INTO test_table (id, name) VALUES (1, 'test')")

        #validate if the action changes the state of the table
        self.cursor.execute('SELECT COUNT(*) FROM test_table')
        after_count = self.cursor.fetchone()[0]
        self.assertEqual(before_count + 1, after_count)

    def tearDown(self):
        """clean up the test table and close the connection"""
        self.cursor.execute('DROP TABLE test_table')
        self.conn.close()

if __name__ == '__main__':
    unittest.main()
        

